<eml:EML xmlns:eml="http://www.opengis.net/eml/0.0.1"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns:fes="http://www.opengis.net/fes/2.0"
         xmlns:swe="http://www.opengis.net/swe/1.0.1">
    <eml:SimplePatterns>
        <!-- input pattern if only one value is in the eventing queue -->
        <eml:SimplePattern inputName="input" patternID="initial_count">
            <eml:SelectFunctions>
                <eml:SelectFunction newEventName="initial_count_stream">
                    <eml:SelectEvent eventName="input"/>
                </eml:SelectFunction>
            </eml:SelectFunctions>
            <eml:View>
                <eml:LengthView>
                    <eml:EventCount>2</eml:EventCount>
                </eml:LengthView>
            </eml:View>
            <Guard>
                <fes:Filter>
                    <fes:PropertyIsEqualTo>
                        <fes:ValueReference>VIEW_COUNT</fes:ValueReference>
                        <fes:Literal>
                            <swe:Count>
                                <swe:value>1</swe:value>
                            </swe:Count>
                        </fes:Literal>
                    </fes:PropertyIsEqualTo>
                </fes:Filter>
            </Guard>
            <PropertyRestrictions>
                <PropertyRestriction>
                    <name>observedProperty</name>
                    <!--Here you need to insert the name of the observed property which shall be monitored.-->
                    <value>AirTemperature</value>
                </PropertyRestriction>
                <PropertyRestriction>
                    <name>sensorID</name>
                    <!--Here you need to insert the name of the procedure (sensor) which shall be monitored.-->
                    <value>ws2500</value>
                </PropertyRestriction>
            </PropertyRestrictions>
        </SimplePattern>
        <SimplePattern inputName="input" patternID="rule4_overshoot_stream">
            <SelectFunctions>
                <SelectFunction newEventName="rule4_overshoot" createCausality="false">
                    <SelectEvent eventName="input"/>
                </SelectFunction>
            </SelectFunctions>
            <View>
                <LengthView>
                    <EventCount>1</EventCount>
                </LengthView>
            </View>
            <Guard>
                <fes:Filter xmlns:fes="http://www.opengis.net/fes/2.0">
                    <fes:PropertyIsGreaterThan>
                        <fes:ValueReference>input/doubleValue</fes:ValueReference>
                        <!--  The value at which an alert shall start.-->
                        <fes:Literal>30.6</fes:Literal>
                    </fes:PropertyIsGreaterThan>
                </fes:Filter>
            </Guard>
            <PropertyRestrictions>
                <PropertyRestriction>
                    <name>observedProperty</name>
                    <!--Here you need to insert the name of the observed property which shall be monitored.-->
                    <value>AirTemperature</value>
                </PropertyRestriction>
                <PropertyRestriction>
                    <name>sensorID</name>
                    <!--Here you need to insert the name of the observed property which shall be monitored.-->
                    <value>AirTemperature</value>
                </PropertyRestriction>
            </PropertyRestrictions>
        </SimplePattern>
        <SimplePattern inputName="input" patternID="rule4_undershoot_stream">
            <SelectFunctions>
                <SelectFunction newEventName="rule4_undershoot" createCausality="false">
                    <SelectEvent eventName="input"/>
                </SelectFunction>
            </SelectFunctions>
            <View>
                <LengthView>
                    <EventCount>1</EventCount>
                </LengthView>
            </View>
            <Guard>
                <fes:Filter>
                    <fes:PropertyIsLessThanOrEqualTo>
                        <fes:ValueReference>input/doubleValue</fes:ValueReference>
                        <!--The value at which an alert shall end.-->
                        <fes:Literal>0.5</fes:Literal>
                    </fes:PropertyIsLessThanOrEqualTo>
                </fes:Filter>
            </Guard>
            <PropertyRestrictions>
                <PropertyRestriction>
                    <name>observedProperty</name>
                    <value>urn:ogc:def:phenomenon:OGC::WaterLevel</value>
                </PropertyRestriction>
                <PropertyRestriction>
                    <name>sensorID</name>
                    <!--Here you need to insert the name of the procedure (sensor) which shall be monitored.-->
                    <value>ws2500</value>
                </PropertyRestriction>
            </PropertyRestrictions>
        </SimplePattern>
    </SimplePatterns>
    <ComplexPatterns>
        <ComplexPattern patternID="initial_count_einstieg_stream_event">
            <SelectFunctions>
                <SelectFunction newEventName="rule4_overshoot_notification" createCausality="true" outputName="rule4_einstieg">
                    <NotifyOnSelect>
                        <Message>Start of alert</Message>
                    </NotifyOnSelect>
                </SelectFunction>
            </SelectFunctions>
            <Guard>
                <fes:Filter xmlns:fes="http://www.opengis.net/fes/2.0">
                </fes:Filter>
            </Guard>
            <StructuralOperator>
                <CAUSE/>
            </StructuralOperator>
            <FirstPattern>
                <PatternReference>initial_count</PatternReference>
                <SelectFunctionNumber>0</SelectFunctionNumber>
            </FirstPattern>
            <SecondPattern>
                <PatternReference>initial_count</PatternReference>
                <SelectFunctionNumber>0</SelectFunctionNumber>
            </SecondPattern>
        </ComplexPattern>
        <!-- Einstiegsklausel -->
        <ComplexPattern patternID="rule4_overshoot_notification_stream">
            <SelectFunctions>
                <SelectFunction newEventName="rule4_overshoot_notification" createCausality="true" outputName="rule4_einstieg">
                    <NotifyOnSelect>
                        <Message>Start of alert</Message>
                    </NotifyOnSelect>
                </SelectFunction>
            </SelectFunctions>
            <StructuralOperator>
                <BEFORE/>
            </StructuralOperator>
            <FirstPattern>
                <PatternReference>rule4_undershoot_stream</PatternReference>
                <SelectFunctionNumber>0</SelectFunctionNumber>
            </FirstPattern>
            <SecondPattern>
                <PatternReference>rule4_overshoot_stream</PatternReference>
                <SelectFunctionNumber>0</SelectFunctionNumber>
            </SecondPattern>
        </ComplexPattern>
        <ComplexPattern patternID="rule4_undershoot_notification_stream">
            <SelectFunctions>
                <SelectFunction newEventName="rule4_undershoot_notification" createCausality="true" outputName="rule4_ausstieg">
                    <NotifyOnSelect>
                        <Message>End of alert</Message>
                    </NotifyOnSelect>
                </SelectFunction>
            </SelectFunctions>
            <StructuralOperator>
                <BEFORE/>
            </StructuralOperator>
            <eml:FirstPattern>
                <eml:PatternReference>rule4_overshoot_stream</eml:PatternReference>
                <eml:SelectFunctionNumber>0</eml:SelectFunctionNumber>
            </eml:FirstPattern>
            <eml:SecondPattern>
                <eml:PatternReference>rule4_undershoot_stream</eml:PatternReference>
                <eml:SelectFunctionNumber>0</eml:SelectFunctionNumber>
            </eml:SecondPattern>
        </eml:ComplexPattern>
    </eml:ComplexPatterns>
    <eml:TimerPatterns/>
    <eml:RepetitivePatterns/>
</eml:EML>
